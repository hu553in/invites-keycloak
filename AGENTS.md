# Project Rules

- Code lives in `src/main/kotlin/com/github/hu553in/invites_keycloak`; tests mirror it under `src/test`.
- Shared assets sit in `src/main/resources`.
- Run locally with `make run_local` (note: this will occupy the current shell — run detached if needed).
- Build, test and verify everything via `make check`.
- Integration tests rely on Testcontainers.
- Tests for external API calls rely on WireMock.
- `make run_docker[_rebuild]` runs the composed stack; `make stop_docker` stops it.
- Detekt rules are in `config/detekt.yml`.
- Keep constructor injection.
- Follow Conventional Commits.
- Link docs/tests to behavior changes.
- Never commit secrets.
- Check dependency health with `./gradlew dependencyUpdates`.
- Implement any new changes as externally configurable through `.env` -> `docker-compose.yml` -> `application.yml`.
- Add only really useful tests — no need to test obvious things just to have such tests.
- Add any new (only important and really useful) rules and conventions to AGENTS.md.
- Actualize any old rules and conventions in AGENTS.md if needed.
- This project is related to security, so implement all things with the highest level of security in mind.
- When interacting with other APIs, use `WebClient`.
- Ensure any secrets are never logged unmasked.
